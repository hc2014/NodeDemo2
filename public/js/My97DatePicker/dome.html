<html>
<head runat="server">
     <script language="javascript" type="text/javascript" src="WdatePicker.js"></script>
</head>
<body
<from>
只输入或者显示年月日：
<input id="dptzhucerq" runat="server" type="text" maxlength="10" style="width: 145px" datatype="Require" msg="注册日期不能为空!" class="Wdate" onfocus="WdatePicker()" />
日期和时间:
<input type="text" class="Wdate" id="d412" onfocus="WdatePicker({skin:'whyGreen',dateFmt:'yyyy-MM-dd HH:mm:ss'})" />
日期范围限制：
<input type="text" class="Wdate" id="d412" onfocus="WdatePicker({skin:'whyGreen',dateFmt:'yyyy-MM-dd HH:mm:ss',minDate:'2008-03-08 11:30:00',maxDate:'2008-03-10 20:59:30'})" value="2008-03-09 11:00:00"/>

限制日期的范围:
<input type="text" class="Wdate" id="d413" onfocus="WdatePicker({dateFmt:'yyyy年M月',minDate:'2008-2',maxDate:'2008-10'})"/>

限制时间范围：
<input type="text" class="Wdate" id="d414" onfocus="WdatePicker({dateFmt:'H:mm:ss',minDate:'8:00:00',maxDate:'11:30:00'})"/>

<br/><br/>
<br/>

<DIV id=content>
<H2>二. 功能及示例<A id=m2 name=m2></A></H2>
<H3>4. 日期范围限制<A id=m24 name=m24></A></H3>
<OL>
  <LI>静态限制<A id=m241 name=m241></A><BR><SPAN class=STYLE1>注意:日期格式必须与 realDateFmt 
  和 realTimeFmt 一致而不是与 dateFmt 一致</SPAN> 
  <P>你可以给通过配置minDate(最小日期),maxDate(最大日期)为静态日期值,来限定日期的范围</P>
  <DIV>
  <H4>示例4-1-1 限制日期的范围是 2006-09-10到2008-12-20</H4>
  <P><INPUT id=d411 class=Wdate 
  onfocus="WdatePicker({skin:'whyGreen',minDate:'2006-09-10',maxDate:'2008-12-20'})" 
  type=text><BR>&lt;input id="d411" class="Wdate" type="text" 
  onfocus="WdatePicker({skin:'whyGreen',<SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'2006-09-10',</SPAN><SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'2008-12-20'</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-1-2 限制日期的范围是 2008-3-8 11:30:00 到 2008-3-10 20:59:30</H4>
  <P><INPUT id=d412 class=Wdate 
  onfocus="WdatePicker({skin:'whyGreen',dateFmt:'yyyy-MM-dd HH:mm:ss',minDate:'2008-03-08 11:30:00',maxDate:'2008-03-10 20:59:30'})" 
  value="2008-03-09 11:00:00" type=text><BR>&lt;input type="text" class="Wdate" 
  id="d412" onfocus="WdatePicker({skin:'whyGreen',<SPAN 
  class=STYLE2>dateFmt:</SPAN><SPAN class=STYLE1>'yyyy-MM-dd 
  HH:mm:ss',</SPAN><SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'2008-03-08 11:30:00',</SPAN><SPAN 
  class=STYLE2>maxDate:</SPAN><SPAN class=STYLE1>'2008-03-10 20:59:30'</SPAN>})" 
  value="2008-03-09 11:00:00"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-1-3 限制日期的范围是 2008年2月 到 2008年10月</H4>
  <P><INPUT id=d413 class=Wdate 
  onfocus="WdatePicker({dateFmt:'yyyy年M月',minDate:'2008-2',maxDate:'2008-10'})" 
  type=text><BR>&lt;input type="text" class="Wdate" id="d413" 
  onfocus="WdatePicker({<SPAN class=STYLE2>dateFmt:</SPAN><SPAN 
  class=STYLE1>'yyyy年M月',</SPAN><SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'2008-2',</SPAN><SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'2008-10'</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-1-4 限制日期的范围是 8:00:00 到 11:30:00</H4>
  <P><INPUT id=d414 class=Wdate 
  onfocus="WdatePicker({dateFmt:'H:mm:ss',minDate:'8:00:00',maxDate:'11:30:00'})" 
  type=text><BR>&lt;input type="text" class="Wdate" id="d414" 
  onfocus="WdatePicker({<SPAN class=STYLE2>dateFmt:</SPAN><SPAN 
  class=STYLE1>'H:mm:ss',</SPAN><SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'8:00:00',</SPAN><SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'11:30:00'</SPAN>})"/&gt;</P></DIV></LI>
  <LI>动态限制<A id=m242 name=m242></A><BR><SPAN class=STYLE1>注意:日期格式必须与 realDateFmt 
  和 realTimeFmt 一致而不是与 dateFmt 一致</SPAN> 
  <P>你可以通过系统给出的动态变量,如%y(当前年),%M(当前月)等来限度日期范围,你还可以通过{}进行表达式运算,如:{%d+1}:表示明天<BR><BR>动态变量表</P>

  <DIV>
  <H4>示例4-2-1 只能选择今天以前的日期(包括今天)</H4>
  <P><INPUT id=d421 class=Wdate 
  onfocus="WdatePicker({skin:'whyGreen',maxDate:'%y-%M-%d'})" 
  type=text><BR>&lt;input id="d421" class="Wdate" type="text" 
  onfocus="WdatePicker({skin:'whyGreen',<SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-%d'</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-2-2 <SPAN class=STYLE2>使用了运算表达式</SPAN> 只能选择今天以后的日期(不包括今天)</H4>
  <P><INPUT id=d422 class=Wdate onfocus="WdatePicker({minDate:'%y-%M-{%d+1}'})" 
  type=text><BR>&lt;input id="d422" class="Wdate" type="text" 
  onfocus="WdatePicker({<SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-{%d+1}'</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-2-3 只能选择本月的日期1号至本月最后一天</H4>
  <P><INPUT id=d423 class=Wdate 
  onfocus="WdatePicker({minDate:'%y-%M-01',maxDate:'%y-%M-%ld'})" 
  type=text><BR>&lt;input id="d423" class="Wdate" type="text" 
  onfocus="WdatePicker({<SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-01',</SPAN><SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-%ld'</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-2-4 只能选择今天7:00:00至明天21:00:00的日期</H4>
  <P><INPUT id=d424 class=Wdate 
  onfocus="WdatePicker({dateFmt:'yyyy-M-d H:mm:ss',minDate:'%y-%M-%d 7:00:00',maxDate:'%y-%M-{%d+1} 21:00:00'})" 
  type=text><BR>&lt;input id="d424" class="Wdate" type="text" 
  onfocus="WdatePicker({dateFmt:'yyyy-M-d H:mm:ss',<SPAN 
  class=STYLE2>minDate:</SPAN><SPAN class=STYLE1>'%y-%M-%d 7:00:00',</SPAN><SPAN 
  class=STYLE2>maxDate:</SPAN><SPAN class=STYLE1>'%y-%M-{%d+1} 
  21:00:00'</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-2-5 <SPAN class=STYLE2>使用了运算表达式</SPAN> 只能选择 20小时前 至 30小时后 的日期</H4>
  <P><INPUT id=d425 class=Wdate 
  onclick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm',minDate:'%y-%M-%d {%H-20}:%m:%s',maxDate:'%y-%M-%d {%H+30}:%m:%s'})" 
  type=text><BR>&lt;input id="d425" class="Wdate" type="text" 
  onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm',<SPAN 
  class=STYLE2>minDate:</SPAN><SPAN class=STYLE1>'%y-%M-%d 
  {%H-20}:%m:%s'</SPAN>,<SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-%d {%H+30}:%m:%s'</SPAN>})"/&gt;</P></DIV></LI>
  <LI>脚本自定义限制<A id=m243 name=m243></A><BR><SPAN class=STYLE1>注意:日期格式必须与 
  realDateFmt 和 realTimeFmt 一致而不是与 dateFmt 一致</SPAN> 
  <P>系统提供了$dp.$D和$dp.$DV这两个API来辅助你进行日期运算,此外你还可以通过在 #F{} 
  中填入你自定义的脚本,做任何你想做的日期限制</P>
  <DIV>
  <H4>示例4-3-1 前面的日期不能大于后面的日期且两个日期都不能大于 2020-10-01</H4>
  <P>合同有效期从 <INPUT id=d4311 class=Wdate 
  onfocus="WdatePicker({maxDate:'#F{$dp.$D(\'d4312\')||\'2020-10-01\'}'})" 
  type=text> 到 <INPUT id=d4312 class=Wdate 
  onfocus="WdatePicker({minDate:'#F{$dp.$D(\'d4311\')}',maxDate:'2020-10-01'})" 
  type=text> <BR>&lt;input id="d4311" class="Wdate" type="text" 
  onFocus="WdatePicker({<SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'#F{$dp.$D(\'d4312\')||\'2020-10-01\'}'</SPAN>})"/&gt; 
  <BR>&lt;input id="d4312" class="Wdate" type="text" onFocus="WdatePicker({<SPAN 
  class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'#F{$dp.$D(\'d4311\')}'</SPAN>,<SPAN 
  class=STYLE2>maxDate:'2020-10-01'</SPAN>})"/&gt;<BR><BR><SPAN 
  class=STYLE1>注意:</SPAN><BR>两个日期的日期格式必须相同<BR><BR>$dp.$ 相当于 
  document.getElementById 函数.<BR>那么为什么里面的 ' 使用 \' 呢? 那是因为 " 和 ' 
  都被外围的函数使用了,故使用转义符 \ ,否则会提示JS语法错误.<BR>所以您在其他地方使用时注意把 \' 改成 " 或者 ' 
  来使用.<BR><BR>#F{$dp.$D(\'d4312\')||\'2020-10-01\'} 表示当 d4312 为空时, 采用 2020-10-01 
  的值作为最大值<BR></P></DIV>
  <DIV>
  <H4>示例4-3-2 前面的日期+3天 不能大于 后面的日期</H4>
  <P>日期从 <INPUT id=d4321 class=Wdate 
  onfocus="WdatePicker({maxDate:'#F{$dp.$D(\'d4322\',{d:-3});}'})" type=text> 到 
  <INPUT id=d4322 class=Wdate 
  onfocus="WdatePicker({minDate:'#F{$dp.$D(\'d4321\',{d:3});}'})" type=text> 
  <BR>&lt;input type="text" class="Wdate" id="d4321" onFocus="WdatePicker({<SPAN 
  class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'#F{$dp.$D(\'d4322\',{d:-3});}'</SPAN>})"/&gt;<BR>&lt;input 
  type="text" class="Wdate" id="d4322" onFocus="WdatePicker({<SPAN 
  class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'#F{$dp.$D(\'d4321\',{d:3});}'</SPAN>})"/&gt;<BR><BR>使用 <SPAN 
  class=STYLE2>$dp.$D 函数</SPAN> 可以将日期框中的值,加上定义的日期差量:<BR>两个参数: <SPAN 
  class=STYLE1>id={字符类型}需要处理的文本框的id值</SPAN> , <SPAN 
  class=STYLE1>obj={对象类型}日期差量</SPAN><BR><SPAN 
  class=STYLE2>日期差量用法:</SPAN><BR>属性y,M,d,H,m,s分别代表年月日时分秒<BR>如 
  <BR>为空时,表示直接取值,不做差量(示例4-3-1中的参数就是空的)<BR>{M:5,d:7} 表示 五个月零7天<BR>{y:1,d:-3} 表示 
  1年少3天<BR>{d:1,H:1} 表示一天多1小时</P></DIV>
  <DIV>
  <H4>示例4-3-3 前面的日期+3月零2天 不能大于 后面的日期 且 前面日期都不能大于 2020-4-3减去3月零2天 后面日期 不能大于 
  2020-4-3</H4>
  <P>住店日期从 <INPUT id=d4331 class=Wdate 
  onfocus="WdatePicker({maxDate:'#F{$dp.$D(\'d4332\',{M:-3,d:-2})||$dp.$DV(\'2020-4-3\',{M:-3,d:-2})}'})" 
  type=text> 到 <INPUT id=d4332 class=Wdate 
  onfocus="WdatePicker({minDate:'#F{$dp.$D(\'d4331\',{M:3,d:2});}',maxDate:'2020-4-3'})" 
  type=text> <BR>&lt;input type="text" class="Wdate" id="d4331" 
  onFocus="WdatePicker({<SPAN class=STYLE2>maxDate:</SPAN>'<SPAN 
  class=STYLE1>#F{$dp.$D(\'d4332\',{M:-3,d:-2})||$dp.$DV(\'2020-4-3\',{M:-3,d:-2})}</SPAN>'})"/&gt;<BR>&lt;input 
  type="text" class="Wdate" id="d4332" onFocus="WdatePicker({<SPAN 
  class=STYLE2>minDate:</SPAN>'<SPAN 
  class=STYLE1>#F{$dp.$D(\'d4331\',{M:3,d:2});}</SPAN>',<SPAN 
  class=STYLE1>maxDate:</SPAN>'<SPAN 
  class=STYLE1>2020-4-3</SPAN>'})"/&gt;<BR><BR><SPAN 
  class=STYLE1>注意:<BR></SPAN>#F{$dp.$D(\'d4332\',{M:-3,d:-2}) || 
  $dp.$DV(\'2020-4-3\',{M:-3,d:-2})}<BR>表示当 d4332 为空时, 采用 
  $dp.$DV(\'2020-4-3\',{M:-3,d:-2})} 的值作为最大值</P>
  <P>使用 <SPAN class=STYLE2>$dp.$DV 函数</SPAN> 可以将显式传入的值,加上定义的日期差量:<BR>两个参数: <SPAN 
  class=STYLE1>value={字符类型}需要处理的值</SPAN> , <SPAN 
  class=STYLE1>obj={对象类型}日期差量</SPAN><BR>用法同上面的 <SPAN class=STYLE2>$dp.$D</SPAN> 
  类似,如 $dp.$DV(\'2020-4-3\',{M:-3,d:-2}) 表示 2020-4-3减去3月零2天</P></DIV>
  <DIV>
  <H4>示例4-3-4 发挥你的JS才能,定义任何你想要的日期限制</H4>
  <P>自动转到随机生成的一天,当然,此示例没有实际的用途,只是为演示目的<BR>
  <SCRIPT>
	//返回一个随机的日期
	function randomDate(){
		var Y = 2000 + Math.round(Math.random() * 10);
		var M = 1 + Math.round(Math.random() * 11);
		var D = 1 + Math.round(Math.random() * 27);
		return Y+'-'+M+'-'+D;
	}
            </SCRIPT>
  <INPUT id=d434 class=Wdate 
  onfocus="var date=randomDate();WdatePicker({minDate:date,maxDate:date})" 
  type=text> <BR>&lt;script&gt;<BR>//返回一个随机的日期<BR>function randomDate(){<BR>var 
  Y = 2000 + Math.round(Math.random() * 10);<BR>var M = 1 + 
  Math.round(Math.random() * 11);<BR>var D = 1 + Math.round(Math.random() * 
  27);<BR>return Y+'-'+M+'-'+D;<BR>}<BR>&lt;/script&gt;<BR>&lt;input type="text" 
  class="Wdate" id="d434" onFocus="<SPAN class=STYLE1>var 
  date=randomDate();WdatePicker({minDate:date,maxDate:date})</SPAN>"/&gt;</P></DIV></LI>
  <LI>无效天<A id=m244 name=m244></A> 
  <P>可以使用此功能禁用周日至周六所对应的日期,相关属性:disabledDays (0至6 分别代表 周日至周六)</P>
  <DIV>
  <H4>示例4-4-1 禁用 周六 所对应的日期</H4>
  <P><INPUT id=d441 class=Wdate onfocus=WdatePicker({disabledDays:[6]}) 
  type=text><BR>&lt;input id="d441" type="text" class="Wdate" 
  onFocus="WdatePicker({<SPAN class=STYLE2>disabledDays:</SPAN><SPAN 
  class=STYLE1>[6]</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-4-2 通过position属性,自定义弹出位置</H4>
  <P><INPUT id=d442 class=Wdate onfocus=WdatePicker({disabledDays:[0,6]}) 
  type=text><BR>&lt;input id="d442" type="text" class="Wdate" 
  onFocus="WdatePicker({<SPAN class=STYLE2>disabledDays:</SPAN><SPAN 
  class=STYLE1>[0,6]</SPAN>})"/&gt;</P></DIV></LI>
  <LI>无效日期<A id=m245 name=m245></A><BR><SPAN class=STYLE1>注意:日期格式必须与 realDateFmt 
  和 realTimeFmt 一致而不是与 dateFmt 一致</SPAN> 
  <P>可以使用此功能禁用,所指定的一个或多个日期,只要你熟悉正则表达式,你可以尽情发挥<BR><BR><SPAN 
  class=STYLE2>用法(正则匹配):</SPAN> 
  <BR>如果你熟悉正则表达式,会很容易理解下面的匹配用法<BR>如果不熟悉,可以参考下面的常用示例 
  <BR>['2008-02-01','2008-02-29'] 表示禁用 2008-02-01 和 
  2008-02-29<BR>['2008-..-01','2008-02-29'] 表示禁用 2008-所有月份-01 和 
  2008-02-29<BR>['200[0-8]]-02-01','2008-02-29'] 表示禁用 [2000至2008]-02-01 和 
  2008-02-29<BR>['^2006'] 表示禁用 2006年的所有日期 </P>
  <P>此外,您还可以使用 %y %M %d %H %m %s 等变量, 用法同动态日期限制 <SPAN 
  class=STYLE1>注意:%ld不能使用</SPAN><BR>['....-..-01','%y-%M-%d'] 表示禁用 
  所有年份和所有月份的第一天和今天 <BR>['%y-%M-{%d-1}','%y-%M-{%d+1}'] 表示禁用 昨天和明天</P>
  <P>当然,除了可以限制日期以外,您还可以限制时间<BR>['....-..-.. 10\:00\:00'] 表示禁用 每天10点 (注意 <SPAN 
  class=STYLE2>:</SPAN> 需要 使用 <SPAN class=STYLE2>\:</SPAN> ) </P>
  <P>不再多举例了,尽情发挥你的正则才能吧!</P>
  <DIV>
  <H4>示例4-5-1 禁用 每个月份的 5日 15日 25日</H4>
  <P><INPUT id=d451 class=Wdate onfocus="WdatePicker({disabledDates:['5$']})" 
  type=text><BR>&lt;input id="d451" type="text" class="Wdate" 
  onFocus="WdatePicker({<SPAN class=STYLE2>disabledDates:</SPAN><SPAN 
  class=STYLE1>['5$']</SPAN>})"/&gt;<BR><BR><SPAN class=STYLE1>注意 :</SPAN><SPAN 
  class=STYLE2>'5$'</SPAN> 表示以 5 结尾 注意 <SPAN class=STYLE2>$</SPAN> 的用法 
</P></DIV>
  <DIV>
  <H4>示例4-5-2 禁用 所有早于2000-01-01的日期</H4>
  <P><INPUT id=d452 class=Wdate onfocus="WdatePicker({disabledDates:['^19']})" 
  type=text><BR>&lt;input id="d452" type="text" class="Wdate" 
  onFocus="WdatePicker({<SPAN class=STYLE2>disabledDates:</SPAN><SPAN 
  class=STYLE1>['^19']</SPAN>})"/&gt;<BR><BR><SPAN class=STYLE1>注意:</SPAN><SPAN 
  class=STYLE2>'^19'</SPAN> 表示以 19 开头 注意 <SPAN class=STYLE2>^</SPAN> 的用法 
  <BR>当然,可以使用minDate实现类似的功能 这里主要是 在演示 ^ 的用法</P></DIV>
  <DIV>
  <H4>示例4-5-3 配合min/maxDate使用,可以把可选择的日期分隔成多段</H4>
  <P>本示例本月可用日期分隔成五段 分别是: 1-3 8-10 16-24 26,27 29-月末<BR><INPUT id=d453 
  class=Wdate 
  onfocus="WdatePicker({minDate:'%y-%M-01',maxDate:'%y-%M-%ld',disabledDates:['0[4-7]$','1[1-5]$','2[58]$']})" 
  type=text><BR>&lt;input id="d453" type="text" class="Wdate" 
  onFocus="WdatePicker({<SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-01'</SPAN>,<SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-%ld'</SPAN>,<SPAN class=STYLE2>disabledDates:</SPAN><SPAN 
  class=STYLE1>['0[4-7]$','1[1-5]$','2[58]$']</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-5-4 <SPAN class=STYLE2>min/maxDate disabledDays disabledDates 
  配合使用</SPAN> 即使在要求非常苛刻的情况下也能满足需求</H4>
  <P><INPUT id=d454 class=Wdate 
  onfocus="WdatePicker({minDate:'%y-%M-01',maxDate:'%y-%M-%ld',disabledDates:['0[4-7]$','1[1-5]$','2[58]$'],disabledDays:[1,3,6]})" 
  type=text><BR>&lt;input id="d454" type="text" class="Wdate" 
  onFocus="WdatePicker({<SPAN class=STYLE2>minDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-01'</SPAN>,<SPAN class=STYLE2>maxDate:</SPAN><SPAN 
  class=STYLE1>'%y-%M-%ld'</SPAN>,<SPAN class=STYLE2>disabledDates:</SPAN><SPAN 
  class=STYLE1>['0[4-7]$','1[1-5]$','2[58]$']</SPAN>,<SPAN 
  class=STYLE2>disabledDays:</SPAN><SPAN 
  class=STYLE1>[1,3,6]</SPAN>})"/&gt;</P></DIV>
  <DIV>
  <H4>示例4-5-5 禁用前一个小时和后一个小时内所有时间 使用 %y %M %d %H %m %s 等变量</H4>
  <P>鼠标点击 小时输入框时,你会发现当然时间对应的前一个小时和后一个小时是灰色的<BR><INPUT id=d2a25 class=Wdate 
  onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',disabledDates:['%y-%M-%d {%H-1}\:..\:..','%y-%M-%d {%H+1}\:..\:..']})" 
  type=text> <BR>&lt;input id="d2a25" type="text" class="Wdate" 
  onFocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',<SPAN 
  class=STYLE2>disabledDates:</SPAN><SPAN class=STYLE1>['%y-%M-%d 
  {%H-1}\:..\:..','%y-%M-%d {%H+1}\:..\:..']</SPAN>})"/&gt; <BR><BR><SPAN 
  class=STYLE1>注意:</SPAN>%y %M %d等详见<A 
  href="http://www.my97.net/dp/demo/resource/2.4.asp#m242">动态变量表</A></P></DIV>
  <DIV>
  <H4>示例4-5-6 #F{}也是可以使用的</H4>
  <P>本示例利用自定义函数 随机禁用0-23中的任何一个小时<BR>打开小时选择框,你会发现有一个小时被禁用的,而且每次禁用的小时都不同<BR><INPUT 
  id=d456 class=Wdate 
  onfocus="WdatePicker({dateFmt:'HH:mm:ss',disabledDates:['#F{randomH()}']})" 
  type=text>


 <div id="content">

    <h2>二. 功能及示例<a name="m2" id="m2"></a></h2>
<h3>5. 自定义事件<a name="m25" id="m25"></a></h3>
    <ol>
      <li>自定义事件
        <a name="m251" id="m251"></a>
        <p>如果你需要做一些附加的操作,你也不必担心,日期控件自带的自定义事件可以满足你的需求.此外,你还可以在自定义事件中调用提供的API库来做更多的运算和扩展,绝对可以通过很少的代码满足你及其个性化的需求.<br />
          <br />
          注意下面几个重要的指针,将对你的编程带来很多便利<br />
          <span class="STYLE1">this: 指向文本框<br />
          dp: 指向$dp<br />
          dp.cal: 指向日期控件对象</span><br />
          注意:函数原型必须使用类似 <span class="STYLE1">function(dp){} </span>的模式,这样子,在函数内部才可以使用dp</p>
      </li>
      <li>onpicking 和 onpicked 事件
        <a name="m252" id="m252"></a>
        <div>
          <h4>示例5-2-1 onpicking事件演示</h4>
          <p>
            <input type="text" id="5421" onFocus="WdatePicker({onpicking:function(dp){if(!confirm('日期框原来的值为: '+dp.cal.getDateStr()+', 要用新选择的值:' + dp.cal.getNewDateStr() + '覆盖吗?')) return true;}})" class="Wdate"/>
            <br />
            &lt;input type=&quot;text&quot; id=&quot;5421&quot; onFocus=&quot;WdatePicker({<span class="STYLE2">onpicking:</span><span class="STYLE1">function(dp){if(!confirm('日期框原来的值为: '+dp.cal.getDateStr()+', 要用新选择的值:' + dp.cal.getNewDateStr() + '覆盖吗?')) return true;}</span>})&quot; class=&quot;Wdate&quot;/&gt;<br />
            <br />
            <span class="STYLE1">注意:</span>你注意到dp.cal.getDateStr和dp.cal.getNewDateStr的用法了嘛? 详见<a href="999.asp?#m5">内置函数和属性</a></p>
        </div>
        <div>
          <h4>示例5-2-2 使用onpicked实现日期选择联动</h4>
          <p>选择第一个日期的时候,第二个日期选择框自动弹出<br />
            日期从:
            <input id="d5221" class="Wdate" type="text" onFocus="var d5222=$dp.$('d5222');WdatePicker({onpicked:function(){d5222.focus();},maxDate:'#F{$dp.$D(\'d5222\')}'})"/>
            至
            <input id="d5222" class="Wdate" type="text" onFocus="WdatePicker({minDate:'#F{$dp.$D(\'d5221\')}'})"/>
            <br />
            <span class="STYLE1">注意:</span>下面第一个控件代码的写法<br />
            &lt;input id=&quot;<span class="STYLE1">d5221</span>&quot; class=&quot;Wdate&quot; type=&quot;text&quot; onFocus=&quot;var d5222=$dp.$('d5222');WdatePicker({<span class="STYLE2">onpicked:</span><span class="STYLE1">function(){d5222.focus();}</span>,maxDate:'#F{$dp.$D(\'d5222\')}'})&quot;/&gt;<br />
至<br />
&lt;input id=&quot;<span class="STYLE1">d5222</span>&quot; class=&quot;Wdate&quot; type=&quot;text&quot; onFocus=&quot;WdatePicker({minDate:'#F{$dp.$D(\'d5221\')}'})&quot;/&gt;<br />
            <br />
            <span class="STYLE1">注意:</span>$dp.$是一个<a href="999.asp?#m5">内置函数</a>,相当于document.getElementById</p>
        </div>
        <div>
          <h4>示例5-2-3 将选择的值拆分到文本框 </h4>
          <p>
            <input type="text" id="d523_y" size="5"/>
            年
            <input type="text" id="d523_M" size="3"/>
            月
            <input type="text" id="d523_d" size="3"/>
            日
            <input type="text" id="d523_HH" size="3"/>
            时
            <input type="text" id="d523_mm" size="3"/>
            分
            <input type="text" id="d523_ss" size="3"/>
            秒
            <input type="text" id="d523"/>
            <img onclick="WdatePicker({el:'d523',dateFmt:'yyyy-MM-dd HH:mm:ss',onpicked:pickedFunc})" src="../../My97DatePicker/skin/datePicker.gif" width="16" height="22" align="absmiddle" style="cursor:pointer"/>
            <script>
			function pickedFunc(){
				$dp.$('d523_y').value=$dp.cal.getP('y');
				$dp.$('d523_M').value=$dp.cal.getP('M');
				$dp.$('d523_d').value=$dp.cal.getP('d');
				$dp.$('d523_HH').value=$dp.cal.getP('H');
				$dp.$('d523_mm').value=$dp.cal.getP('m');
				$dp.$('d523_ss').value=$dp.cal.getP('s');
			}
			</script>
            <br />
            &lt;input type=&quot;text&quot; id=&quot;d523_y&quot; size=&quot;5&quot;/&gt;
            年<br />
            &lt;input type=&quot;text&quot; id=&quot;d523_M&quot; size=&quot;3&quot;/&gt;
            月<br />
            &lt;input type=&quot;text&quot; id=&quot;d523_d&quot; size=&quot;3&quot;/&gt;
            日<br />
            &lt;input type=&quot;text&quot; id=&quot;d523_HH&quot; size=&quot;3&quot;/&gt;
            时<br />
            &lt;input type=&quot;text&quot; id=&quot;d523_mm&quot; size=&quot;3&quot;/&gt;
            分<br />
            &lt;input type=&quot;text&quot; id=&quot;d523_ss&quot; size=&quot;3&quot;/&gt;
            秒 <br />
            &lt;img onclick=&quot;WdatePicker({<span class="STYLE2">el:</span><span class="STYLE1">'d523'</span>,dateFmt:'yyyy-MM-dd HH:mm:ss',<span class="STYLE2">onpicked:</span><span class="STYLE1">pickedFunc</span>})&quot; src=&quot;../../My97DatePicker/skin/datePicker.gif&quot; width=&quot;16&quot; height=&quot;22&quot; align=&quot;absmiddle&quot; style=&quot;cursor:pointer&quot;/&gt;<br />
            <span class="STYLE1">&lt;script&gt;</span><br />
            <span class="STYLE2">function</span> pickedFunc(){<br />
            $dp.$('d523_y').value=$dp.cal.getP('y');<br />
            $dp.$('d523_M').value=$dp.cal.getP('M');<br />
            $dp.$('d523_d').value=$dp.cal.getP('d');<br />
            $dp.$('d523_HH').value=$dp.cal.getP('H');<br />
            $dp.$('d523_mm').value=$dp.cal.getP('m');<br />
            $dp.$('d523_ss').value=$dp.cal.getP('s');<br />
            }<br />
            <span class="STYLE1">&lt;/script&gt;</span><br />
            <br />
            <span class="STYLE1">注意:</span>el:'d523'中,如果你不需要d523这个框,你可以把他改成hidden,但是el属性必须指定<br />
            $dp.$和$dp.cal.getP都是<a href="999.asp?#m5">内置函数</a> </p>
        </div>
      </li>
      <li>onclearing 和 oncleared 事件
        <a name="m253" id="m253"></a>
        <div>
          <h4>示例5-3-1 使用onclearing事件取消清空操作</h4>
          <p>
            <input type="text" class="Wdate" id="d531" onFocus="WdatePicker({onclearing:function(){if(!confirm('日期框的值为:'+this.value+', 确实要清空吗?'))return true;}})"/>
            <br />
            &lt;input type=&quot;text&quot; class=&quot;Wdate&quot; id=&quot;d531&quot; onFocus=&quot;WdatePicker({<span class="STYLE2">onclearing:</span><span class="STYLE1">function(){if(!confirm('日期框的值为:'+this.value+', 确实要清空吗?'))return true;}</span>})&quot;/&gt;<br />
            <br />
            <span class="STYLE1">注意:</span>当onclearing函数返回true时,系统的清空事件将被取消,<br />
            函数体里面没有引用$dp,所以函数原型里面可以省略参数dp </p>
        </div>
        <div>
          <h4>示例5-3-2 使用cal对象取得当前日期所选择的月份(使用了 dp.cal)</h4>
          <p>
            <input type="text" class="Wdate" id="d532" onFocus="WdatePicker({oncleared:function(dp){alert('当前日期所选择的月份为:'+dp.cal.date.M);}})"/>
            <br />
            &lt;input type=&quot;text&quot; class=&quot;Wdate&quot; id=&quot;d532&quot; onFocus=&quot;WdatePicker({<span class="STYLE2">oncleared:</span><span class="STYLE1">function(dp){alert('当前日期所选择的月份为:'+dp.cal.date.M);}</span>})&quot;/&gt;</p>
        </div>
        <div>
          <h4>示例5-3-3 综合使用两个事件</h4>
          <p>
            <input type="text" class="Wdate" id="d533" onFocus="d533_focus(this)" value="2000-04-09"/>
            <script>
function d533_focus(element){
var clearingFunc = function(){ if(!confirm('日期框的值为:'+this.value+', 确实要清空吗?')) return true; }
var clearedFunc = function(){ alert('日期框已被清空'); }
WdatePicker({el:element,onclearing:clearingFunc,oncleared:clearedFunc})
}
</script>
            <br />
            <span class="STYLE1">&lt;script&gt;</span><br />
            <span class="STYLE2">function</span> d533_focus(element){<br />
            var clearingFunc = function(){
            if(!confirm('日期框的值为:'+this.value+', 确实要清空吗?')) return true;
            }<br />
            var clearedFunc = function(){
            alert('日期框已被清空');
            }<br />
            WdatePicker({el:element,onclearing:clearingFunc,oncleared:clearedFunc})<br />
            }<br />
            <span class="STYLE1">&lt;/script&gt;</span><br />
            &lt;input type=&quot;text&quot; class=&quot;Wdate&quot; id=&quot;d533&quot; onFocus=&quot;<span class="STYLE1">d533_focus(this)</span>&quot;/&gt;</p>
        </div>
      </li>
      <li>年月日时分秒的 changing和changed <a name="m254" id="m254"></a> <p>年月日时分秒都有对应的changing和changed事件,分别是:<br />
        ychanging ychanged      <br />
        Mchanging Mchanged<br />
        dchanging dchanged<br />
        Hchanging Hchanged<br />
        mchanging mchanged<br />
        schanging schanged      <br />
        </p>
        <div>
          <h4>示例5-4-1 年月日改变时弹出信息</h4>
          <p>
            <input type="text" class="Wdate" id="d" onFocus="WdatePicker({dchanging:cDayFunc,Mchanging:cMonthFunc,ychanging:cYearFunc,dchanged:cDayFunc,Mchanged:cMonthFunc,ychanged:cYearFunc})"/>
            <script>
				function cDayFunc(){
					cFunc('d');
				}
				function cMonthFunc(){
					cFunc('M');
				}
				function cYearFunc(){
					cFunc('y');
				}
				function cFunc(who){
					var str,p,c = $dp.cal;
					if(who=='y'){
						str='年份';
						p='y';
					}
					else if(who=='M'){
						str='月份';
						p='M';
					}
					else if(who=='d'){
						str='日期';
						p='d';
					}
					alert(str+'发生改变了!\n$dp.cal.date.'+p+'='+c.date[p]+'\n$dp.cal.newdate.'+p+'='+c.newdate[p]);
				}
			</script>
            <br />
            &lt;input type=&quot;text&quot; class=&quot;Wdate&quot; onFocus=&quot;WdatePicker({<span class="STYLE2">dchanging:<span class="STYLE1">cDayFunc</span>, Mchanging:</span><span class="STYLE1">cMonthFunc</span>,<span class="STYLE2"> ychanging:</span><span class="STYLE1">cYearFunc</span>,<span class="STYLE2"> dchanged:<span class="STYLE1">cDayFunc</span>, Mchanged:</span><span class="STYLE1">cMonthFunc</span>, <span class="STYLE2">ychanged:</span><span class="STYLE1">cYearFunc</span>})&quot;/&gt;<br />
            <span class="STYLE1">&lt;script&gt;</span><br />
            <span class="STYLE2">function</span> cDayFunc(){<br />
cFunc('d');<br />
}<br />
<span class="STYLE2">function</span> cMonthFunc(){<br />
cFunc('M');<br />
}<br />
<span class="STYLE2">function</span> cYearFunc(){<br />
cFunc('y');<br />
}<br />
<span class="STYLE2">function</span> cFunc(who){<br />
var str,p,c = $dp.cal;<br />
if(who=='y'){<br />
str='年份';<br />
p='y';<br />
}<br />
else if(who=='M'){<br />
str='月份';<br />
p='M';<br />
}<br />
else if(who=='d'){<br />
str='日期';<br />
p='d';<br />
}<br />
alert(str+'发生改变了!\n$dp.cal.date.'+p+'='+c.date[p]+'\n$dp.cal.newdate.'+p+'='+c.newdate[p]);<br />
}<span class="STYLE1"><br />
&lt;/script&gt;</span><br />
<br />
          这个例子用到了 $dp.cal.date 和 $dp.cal.newdate 属性,你能从这里发现他们的不同之处吗?<br />
          下面是有关这两个属性的描述详见<a href="999.asp#m5">内置函数和属性</a>
          </p>
        </div>
        <p><br />
        </p>
      </li>
    </ol>
    <h3><a href="2.6.asp">6. 快速选择功能</a> <a name="m26" id="m26"></a></h3>
    <h2><a href="3.asp">三. 配置说明</a><a name="m3" id="m3"></a></h2>
    <h2><a href="999.asp">四. 如何使用</a><a name="m4" id="m4"></a></h2>
    <br />
    <br />
  </div>
  <div style="clear:both"></div>
</div>
</form></body>


